(function(E,F){typeof exports=="object"&&typeof module!="undefined"?F(exports,require("crypto"),require("path"),require("posthtml"),require("posthtml-expressions"),require("posthtml-match-helper"),require("posthtml-render"),require("lodash"),require("fs-extra"),require("postcss"),require("postcss-load-config"),require("postcss-safe-parser"),require("postcss-selector-parser"),require("connect-history-api-fallback"),require("fast-glob"),require("shelljs"),require("circular"),require("execa"),require("html-minifier-terser"),require("@rollup/pluginutils"),require("node-localstorage")):typeof define=="function"&&define.amd?define(["exports","crypto","path","posthtml","posthtml-expressions","posthtml-match-helper","posthtml-render","lodash","fs-extra","postcss","postcss-load-config","postcss-safe-parser","postcss-selector-parser","connect-history-api-fallback","fast-glob","shelljs","circular","execa","html-minifier-terser","@rollup/pluginutils","node-localstorage"],F):(E=typeof globalThis!="undefined"?globalThis:E||self,F(E.posthtmlView={},E.crypto,E.path,E.posthtml,E.expressions,E.match,E.posthtmlRender,E.lodash,E.fse,E.postcss,E.postcssrc,E.postcssSafeParser,E.postcssSelectorParser,E.history,E.fg,E.shell,E.circular,E.execa,E.htmlMinifierTerser,E.pluginutils,E.nodeLocalstorage))})(this,function(E,F,ce,ie,le,oe,ue,yt,fe,pe,he,me,de,ge,ye,_e,ve,we,be,xe,$e){"use strict";function H(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var T=H(ce),L=H(ie),je=H(le),I=H(oe),Y=H(fe),Ce=H(pe),Ee=H(he),_t=H(me),vt=H(de),Ie=H(ge),Pe=H(ye),wt=H(_e),ke=H(ve),Se=H(we);function Ae(t,e=0){const s=1540483477,r=24;let n=t.length,c=e^n,u=0;for(;n>=4;){let f=Re(t,u);f=N(f,s),f^=f>>>r,f=N(f,s),c=N(c,s),c^=f,u+=4,n-=4}switch(n){case 3:c^=bt(t,u),c^=t.charCodeAt(u+2)<<16,c=N(c,s);break;case 2:c^=bt(t,u),c=N(c,s);break;case 1:c^=t.charCodeAt(u),c=N(c,s);break}return c^=c>>>13,c=N(c,s),c^=c>>>15,c>>>0}function Re(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)+(t.charCodeAt(e++)<<16)+(t.charCodeAt(e)<<24)}function bt(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)}function N(t,e){t|=0,e|=0;const s=t&65535,r=t>>>16;return s*e+((r*e&65535)<<16)|0}function xt(t){return Ae(t).toString(36)}const De=/[^-_a-z0-9\u00A0-\uFFFF]/gi,Te=/^\d/;function Z(t,e){return t&&t.replace(De,e||"_").replace(Te,e||"_")}const He=/^(https?:)?\/\//,$t=t=>He.test(t),qe=/^\s*data:/i,jt=t=>qe.test(t),Me=/({|%|:|})/g;function Ct(t){return t.replace(Me,"\\$1")}function*st(t=[],e=!0,s){s=s||(h=>!0);let r="abcdefghijklmnopqrstuvwxyz";e&&(r=r+r.toUpperCase());const c=r+"0123456789",u=r.length,f=c.length;t=[...t||[],/ad/i];let p=0,v=0;for(;;){let h=u,y="";do y=y+c.charAt(v%h),v=~~(v/h),h=f;while(v>0);!t.some(g=>g.test(y))&&s(y)&&(yield y),p++,v=p}}function Ne(t,e,s,r){return T.default.join(T.default.isAbsolute(r)?t:T.default.dirname(s||e),r)}function Oe(t,e,s){return e=Fe(T.default.normalize(T.default.relative(t,e))),s?e[0]==="/"?e:`/${e}`:e}function Fe(t){const e=/^\\\\\?\\/.test(t),s=/[^\u0000-\u0080]+/.test(t);return e||s?t:t.replace(/\\/g,"/")}const Be=require("cssjanus"),Et=new Map,It=/\/\*(.*?)\*\//gs,Ve=/--noflip-rtl-placeholder-\d+:\s*1;?/g,We=/{(.*?)}/gs;function rt(t,e){const s=Et.get(t);if(s)return s;let r=at(t);return r=Be.transform(r,{transformDirInUrl:!1,transformEdgeInUrl:!1,...e}),r=r.replace(It,""),Et.set(t,r),r}function Pt(t){return t.replace(We,e=>{let s=-1;return e.replace(It,r=>r.includes("@noflip")?(s=s+1,`--noflip-rtl-placeholder-${s}:1;`):r)})}function at(t,e){return t.replace(Ve,e===""?e:"/* @noflip */")}const kt=/^(?:x-|v-|:|@)/,Le=/\B([A-Z])/g;function Ue(t){return(t||"").replace(Le,"-$1").toLowerCase()}function Ge(t){let e=t.replace(".html","-html").replace(/\.|_/g,"").split("/").map(s=>Ue(s)).filter(Boolean);return Z(e.join("-"),"-")}const X=/\\?{\\?%(\\?:|\\?#)(.*?)\\?%\\?}/gs;function K(t){const e=!!(t&&X.test(t));return X.lastIndex=0,e}function St(t){return K(t)}const Je=/\.(ttf|eot|woff|woff2)$/;function ze(t){return t=t.split("#")[0],t=t.split("?")[0],Je.test(t)}const Qe=/\/\*(.*?)\*\//gs;function Ye(t){return t=t&&t.replace(Qe,e=>K(e)?"":e),K(t)}function Ze(t){return t&&t.replace(/^[ \n\r\t\f]+/,"").replace(/[ \n\r\t\f]+$/,"")}function At(t,e=!0){return t=t.replace(/ ?[\n\r]+ ?/g,"").replace(/\s{2,}/g,e?" ":""),Ze(t).replace(/\s*;\s*/g,";")}const Xe=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],Ke=["a","animate","animateMotion","animateTransform","circle","clipPath","color-profile","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","hatch","hatchpath","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","solidcolor","stop","style","svg","switch","symbol","text","textPath","title","tspan","unknown","use","view"];function ts(t,e,s){return function(r){const n=t.content||[],c={};n.length&&r.match.call(n,I.default("template"),f=>(!f.attrs||!f.attrs.slot||(c[f.attrs.slot]=f),f));const u=r.match(I.default("slot"),f=>{const p=f.attrs&&f.attrs.name||"";if(!p)return Rt(f.content,n.filter(h=>!(h.tag==="template"&&h.attrs&&h.attrs.slot)));const v=c[p];return v?Rt(f.content,v.content,es(v)):f.content||[]});return t.tag=!1,t.content=u,r}}function Rt(t,e,s){switch(t=Array.isArray(t)?t:[t||""],e=Array.isArray(e)?e:[e||""],s){case"replace":t=e;break;case"prepend":t=[...e,...t];break;case"append":t=[...t,...e];break;default:t=e.filter(Boolean).length===0?t:e;break}return t}function es(t){let e=t.attrs&&t.attrs.type||"";return["replace","prepend","append"].includes(e)||(e="replace"),e}function Dt(t,e,s,r){return L.default((r||[]).concat(e)).process(ue.render(s),t).then(n=>n.tree)}function ss(t,e,s){const r={};Object.entries(e||{}).forEach(([c,u])=>{r[c]=rs(u)});const n={[s.$attrs]:yt.merge({},s.locals,t,r)};return je.default({locals:n})}function rs(t){try{return new Function(`return ${t}`)()}catch{return t}}let nt;async function as({registerComponentsFile:t,root:e,mode:s,encoding:r,prefix:n,join:c,slash:u}){if(nt)return nt;if(!t)return{};const f={},p=c(e,t),v=await Y.default.readFile(p,r);function h(y){y.match(I.default(n("components")),g=>(g.content&&g.content.forEach(d=>{if(typeof d=="string")return;let{src:m,...j}=d.attrs||{};d.tag&&m&&(m=c(p,m),f[d.tag]={tag:d.tag,src:m,resolveId:u(m),locals:j})}),g))}return await L.default([]).use(h).process(v,{}),s!=="development"&&(nt=f),f}const ns=/^(-\w+-)?animation-name$/,cs=/^(-\w+-)?animation$/,is=/-?keyframes$/,Tt=/(?<=^|[^\w\-\u0080-\uffff])url\(\s*('[^']+'|"[^"]+"|[^'")]+)\s*\)/,Ht=/image-set\(([^)]+)\)/;function ct(t,e,s,r,n,c,u){const f=_t.default(t,{from:r}),p={classNames:[],tags:{},assetsCache:new Set},v=Object.create(null);let h=!1,y="";if(!u){let g=function(o){o.forEach(a=>{if(a.type==="atrule"&&(a.name==="media"||a.name==="supports"))g(a.nodes);else switch(a.type){case"rule":if([n,c].includes(a.selector+"{}"))return;hs(a.nodes),a.selector=Ot(ps(a.selector,y,p));break;case"atrule":if(is.test(a.name))if(a.params.startsWith(":global"))a.params=Ot(a.params);else{const x=`_${j}`;a.params.endsWith(x)||(h=!0,v[a.params]=a.params=a.params+x)}break}})};const d=o=>o.replace(n,"").replace(c,""),m=s.mode==="production",j=xt(`scoped-${e}:`+(m?d(t||""):""));y=Z((s.styled.prefix||"")+j),g(f.nodes)}return f.walkDecls(g=>{h&&(ns.test(g.prop)&&(g.value=g.value.split(",").map(j=>v[j.trim()]||j.trim()).join(",")),cs.test(g.prop)&&(g.value=g.value.split(",").map(j=>{const o=j.trim().split(/\s+/),a=o.findIndex(b=>v[b]);return a!==-1?(o.splice(a,1,v[o[a]]),o.join(" ")):j}).join(",")));const d=Tt.test(g.value),m=Ht.test(g.value);if(d||m){const j=a=>(a=s.join(r,a),a=s.slash(a,!0),p.assetsCache.add(a),a),o=d?ls:os;g.value=o(g.value,j)}}),{scopedHash:y,scopedClasses:p,css:f.toString()}}function ls(t,e){return qt(t,Tt,s=>{const[r,n]=s;return Mt(n,r,e)})}function os(t,e){return qt(t,Ht,s=>{const[r,n]=s;return`image-set(${fs(n,({url:u})=>Mt(u,r,e))})`})}function qt(t,e,s){let r,n=t,c="";for(;r=e.exec(n);)c+=n.slice(0,r.index),c+=s(r),n=n.slice(r.index+r[0].length);return c+=n,c}function Mt(t,e,s){let r="";const n=t[0];return(n==='"'||n==="'")&&(r=n,t=t.slice(1,-1)),$t(t)||jt(t)||t.startsWith("#")?e:`url(${r}${s(t)}${r})`}const us=/( |\\t|\\n|\\f|\\r)+/g;function fs(t,e){const r=t.split(",").map(n=>{const[c,u]=n.replace(us," ").trim().split(" ",2);return{url:c,descriptor:u}}).filter(({url:n})=>!!n).map(({url:n,descriptor:c})=>({url:e({url:n,descriptor:c}),descriptor:c}));return r.reduce((n,{url:c,descriptor:u},f)=>(u=u||"",n+=c+` ${u}${f===r.length-1?"":", "}`),"")}function ps(t,e,s){return vt.default(r=>{r.walk(n=>{if((n.type==="class"||n.type==="tag")&&!(Nt(n.parent)||Nt(n.parent&&n.parent.parent))){let u=n.value;n.type==="class"&&(St(u)&&(u=Ct(u)),s.classNames.includes(u)||s.classNames.push(u)),n.type==="tag"&&(s.tags[u]=!0),n.setPropertyWithoutEscape("value",`${u}.${e}`)}})}).processSync(t)}function hs(t){t.forEach(e=>{e.type==="decl"&&["undefined","null"].includes(e.value)&&(e.remove(),e.cleanRaws())})}function Nt(t){return!!(t&&t.type==="pseudo"&&t.value===":global")}const ms=/:global\((.*?)\)/gs;function Ot(t){return t.replace(ms,"$1")}let O,U;const Ft=()=>{try{O=O||Ee.default.sync()}catch{O={file:"",options:{},plugins:[]}}U=U||Ce.default(O.plugins)};function ds(t){function e(s,r){return async function(n){const c=[],u=bs(n,s);if(n.walk(f=>{if(typeof f=="string"||!f.tag)return f;const p=f.attrs||{},v=ws(p,f.tag,u,s);if(v){if(Xe.includes(v.tag))throw new Error(`The component <${v.tag}> is the HTML tag. page file: ${s.from}`);if(Ke.includes(v.tag))throw new Error(`The component <${v.tag}> is the SVG tag. page file: ${s.from}`);f.attrs&&delete f.attrs[s.prefix("query")],c.push(vs(v,s.encoding).then(ys(f,v,s)).then(h=>{const y={...s,from:v.src};return e(y,!1)(h)}).then(ts(f)))}return f}),r){const f=s.slash(s.from);c.push(Bt(null,{tag:f.replace(/\/|\./g,"-"),src:s.from,resolveId:f,locals:{}},s)(n))}return c.length>0&&(await Promise.all(c),c.length=0),r?await gs(n,s):n}}return e(t,!0)}async function gs(t,e){const{styled:s,js:r,from:n,mode:c,rtl:u}=e,f=c==="development",p="",v="__posthtml_view_css__";let h="";const y=[];f&&(t.match(I.default("body"),i=>{const l={tag:"div",attrs:{id:v,"data-id":"development_css_container",style:"display: none !important;"}};return i.content=[l,...i.content||[]],i}),t.match(I.default("html"),i=>(i.attrs=i.attrs||{},i.attrs.dir=u?"rtl":"ltr",i)));const g=new Map,d=[],m=new Map,j=[],o=typeof s.extract=="function",a=r.type==="ts"?"ts":"js";t.match(I.default("style"),function(i){const l=tt(i.content);i.attrs=i.attrs||{};const _=i.attrs["data-scoped-hash"]||"",C=i.attrs["data-resolve-id"]||"";let A=i.attrs["data-to"]||s.to||"head";if(f&&A!=="*"&&(A=`#${v}`),(i.attrs["data-to"]==="file"||A==="file")&&o)l&&!m.has(C)&&(m.set(C,{}),!j.includes(C)&&j.push(C),m.set(C,{to:"file",css:l,scopedHash:_,resolveId:C}));else if(l&&!g.has(C)){if(g.set(C,{}),A==="*")return f||(delete i.attrs["data-to"],delete i.attrs["data-scoped-hash"],delete i.attrs["data-resolve-id"]),i;!d.includes(C)&&d.push(C),g.set(C,{to:A,css:l,scopedHash:_,resolveId:C})}return i.tag=!1,delete i.content,i}),t.match(I.default('script[type="module"]'),i=>{if(!h&&i.attrs&&i.attrs.src){if(/^(https?:)?\/\//.test(i.attrs.src))return i;i.attrs.src=i.attrs.src+"?__posthtml_view__=0",h=i.attrs.src}return i}),!h&&Array.isArray(t)&&(h=e.slash(n,!0).replace(".html","."+a)+"?__posthtml_view__=1",t.push({tag:"script",attrs:{type:"module",src:h}}));const b=new Map,x=i=>{r&&typeof r.extract=="function"&&r.extract(i)};t.match(I.default("script[data-resolve-id]"),i=>{i.attrs=i.attrs||{};const l=i.attrs["data-resolve-id"]||"";if(l&&!b.has(l)){b.set(l,null);const _=i.attrs.src||"",C=i.attrs["data-scoped-hash"]||"",A=(_?"":tt(i.content))||"";let $=_&&T.default.extname(_).replace(".","")||a;$=$==="ts"?"ts":"js",x({type:$,from:n,resolveId:l,scopedHash:C,source:A,mainjs:h,src:_.replace(`.${$}`,"")})}return i.tag=!1,delete i.content,i});const w=new Set;Ft(),j.forEach(i=>{const l=m.get(i);if(!!l&&!!l.css){if(f){l.to=`#${v}`,w.add(l.to),t.match(I.default(l.to),_=>{w.delete(l.to);const C={tag:"style",attrs:{"data-to":"file","data-scoped-hash":l.scopedHash,"data-resolve-id":l.resolveId},content:l.css};return _.content?_.content=[C,..._.content]:_.content=[C],_});return}o&&y.push(U.process(l.css,{...O.options,from:n||void 0}).then(_=>{s.extract&&s.extract({type:"css",from:n,mainjs:h,resolveId:l.resolveId,scopedHash:l.scopedHash,source:_.css})}))}}),d.forEach(i=>{const l=g.get(i);!l||!l.css||(w.add(l.to),t.match(I.default(l.to),_=>{switch(w.delete(l.to),_.tag){case"head":const C=_.content&&_.content.find($=>!$||typeof $=="string"?!1:$.tag==="style"&&$.attrs&&$.attrs[v]===p);if(C)C.content=[...C.content,l.css].filter(Boolean);else{const $={tag:"style",attrs:{[v]:p},content:l.css};_.content?_.content=[..._.content,$]:_.content=[$]}break;case"style":_.content=[..._.content||[],l.css].filter(Boolean);break;default:const A={tag:"style",attrs:{"data-scoped-hash":l.scopedHash,"data-resolve-id":l.resolveId},content:l.css};_.content?_.content=[..._.content,A]:_.content=[A];break}return _}))});const P=typeof e.trimAttr=="function"?e.trimAttr:null,k=typeof e.cumbersomeTrim=="function"?e.cumbersomeTrim:null,S=(i,l)=>{if(typeof l=="string"&&l.trim()){if(P)return P(i,l,At);if(i==="application/ld+json"||kt.test(i))if(l=At(l).trim(),l=l.replace(/^{\s+/g,"{").replace(/\s+}$/g,"}"),k)l=k(i,l);else{const _="[<?=@#$%!*&^@?>]";let C=[],A="";l.replace(/('|")(.*?)('|")/g,($,M,et,Q)=>(C.push(`${M}${et}${Q}`),_)).replace(/\s+(&&|\|\||===?|!==?|<=|>=|\+=|-=)\s+/g,"$1").replace(/\s*\?\s*(.*?)\s*:\s*/g,"?$1:").replace(/(?<=[():\[\],\{\}"!'=])\s+/g,"").replace(/\s+(?=[():\[\],\{\}"!'=])/g,"").split(_).forEach(($,M)=>{A=A+$+(C[M]||"")}),l=A}return l}return null};return t.walk(i=>{if(i.tag&&i.attrs){if(Object.entries(i.attrs).forEach(([l,_])=>{if(["null","undefined"].includes(_)){delete i.attrs[l];return}const C=S(l,_||"");C&&(i.attrs[l]=C)}),i.tag==="script"&&i.attrs.type==="application/ld+json"&&i.content){const l=S(i.attrs.type,[].concat(i.content).join(""));l&&(i.content=[l])}i.attrs.class=(i.attrs.class||"").trim(),i.attrs.class||delete i.attrs.class}return i.tag&&(i.attrs=i.attrs||{},i.tag==="img"&&(i.attrs.alt=i.attrs.alt||""),i.tag==="button"&&(i.attrs.type=i.attrs.type||"button")),i}),t.match(I.default("style"),i=>{const l=tt(i.content);return l&&y.push(U.process(l,{...O.options,from:n||void 0}).then(_=>{i.content=[_.css]})),i}),w.forEach(i=>{throw Error("Invalid selector: "+i)}),await Promise.all(y).then(()=>t)}function ys(t,e,s){return function(r){return typeof s.htmlProcessor=="function"&&(r=s.htmlProcessor(r)),Dt(s.parser,s.plugins,r,[Bt(t,e,s),ss(e.locals,t.attrs,s)])}}function Bt(t,e,s){Ft();const{stylePreprocessor:r,styled:n,addClassIncludes:c,assets:u,noflip:f,cssjanus:p}=s,v=h=>Promise.resolve(r(h));return async function(h){const y=[];let g=!1,d="",m=null;if(h.match(I.default("style"),o=>{const a=o.attrs||{},b=_s(n,a),x=tt(o.content);let w=a.src;const P=a.dynamic!=null||Ye(x);return(w||x)&&y.push(Promise.resolve(null).then(()=>w?(w=s.join(e.src,w),Y.default.readFile(w,s.encoding)):Promise.resolve(x)).then(k=>k?(k=f(k),v(k)):{code:""}).then(k=>{const S=k&&k.code;return{...k,code:p(S||""),to:P&&b.to==="file"?"head":b.to,type:b.type}})),g&&(o.tag=!1,delete o.content),g=!0,o}),y.length>0){const o=await Promise.all(y);y.length=0;const a=o[0].type;let b="",x="",w=n.to;const P=":__posthtml_view_to_file_start_mark__{}",k=":__posthtml_view_to_file_end_mark__{}";o.forEach($=>{$.to==="file"&&$.code&&($.code=`${P}${$.code}${k}`),$.type==="scoped"&&(b=b+($.code||"")),$.type==="global"&&(x=x+($.code||"")),$.to!=="file"&&$.to!==n.to&&(w=$.to)});const S=ct(b,e.resolveId,s,e.src,P,k,!1),i=ct(x,e.resolveId,s,e.src,P,k,!0);b=S.css,d=S.scopedHash,m=S.scopedClasses,x=i.css,i.scopedClasses.assetsCache.forEach($=>{m&&m.assetsCache.add($)}),i.scopedClasses.assetsCache.clear(),o.length=0;const l=$=>{let M="";return $=$.replace(/:__posthtml_view_to_file_start_mark__{}(.*?):__posthtml_view_to_file_end_mark__{}/gs,function(et,Q){return M=M+Q,""}),{css:$,fileCss:M}},_=l(b),C=l(x);b=_.css,x=C.css;let A="";a==="global"?A=C.fileCss+_.fileCss:A=_.fileCss+C.fileCss,h.match(I.default("style"),$=>(a==="global"?$.content=[x+b]:$.content=[b+x],b="",x="",$.attrs=$.attrs||{},$.attrs["data-to"]=w,$.attrs["data-scoped-hash"]=d,$.attrs["data-resolve-id"]=e.resolveId,delete $.attrs.scoped,delete $.attrs.global,delete $.attrs.src,delete $.attrs.to,delete $.attrs.dynamic,$)),A&&Array.isArray(h)&&h.push({tag:"style",attrs:{"data-to":"file","data-scoped-hash":d,"data-resolve-id":e.resolveId},content:A})}const j=s.prefix("js");if(h.match(I.default("script"),o=>{o.attrs=o.attrs||{};let a=o.attrs.src;return a&&/^(https?:)?\/\//.test(a)?o:o.attrs[j]==="null"||o.attrs[j]==="false"?(delete o.attrs[j],o):a&&o.attrs.type&&o.attrs.type==="module"?(o.attrs.src=s.join(e.src,a),o.attrs.src=s.slash(o.attrs.src,!0),o):(o.attrs.type&&o.attrs[j]==null||(a&&(a=s.join(e.src,a),o.attrs.src=s.slash(a,!0)),o.attrs["data-to"]=o.attrs.to,o.attrs["data-scoped-hash"]=d,o.attrs["data-resolve-id"]=e.resolveId,delete o.attrs.to),o)}),h.walk(o=>{if(typeof o=="string")return o;o.attrs=o.attrs||{};const a=m;if(a&&d&&o.tag){const w=o.attrs,P=w.class||"",k=S=>{c&&c.length&&(S={},c.forEach(i=>{S[i]=w[i]}));for(const i in S)if(Object.prototype.hasOwnProperty.call(S,i)){const l=S[i]||"";if(a.classNames.some(_=>l.includes(_)))return!0}return!1};(a.tags[o.tag]||k(w))&&!P.includes(d)&&(o.attrs.class=`${d} ${P}`.trim())}o.attrs.style&&y.push(U.process(o.attrs.style,{...O.options,from:e.src||void 0}).then(w=>{const P=".__posthtml_view_inline_css_123456_abcdef__{",k=ct(`${P}${w.css}}`,e.resolveId,s,e.src,"","",!0);k.scopedClasses.assetsCache.forEach(i=>{m&&m.assetsCache.add(i)}),k.scopedClasses.assetsCache.clear();const S=k.css.replace(P,"").replace("}","");o.attrs&&(o.attrs.style=p(S))})),Object.keys(o.attrs).forEach(w=>{!u.attributes.includes(w)&&u.attrRegExp.test(w)&&u.attributes.push(w)});const b=typeof u._include=="function"&&u._include,x=w=>{if(!String(w).trim()||b&&!b(w)||$t(w)||jt(w)||w.startsWith("#")||K(w))return w;let P=s.join(e.src,w);return P=s.slash(P,!0),m&&m.assetsCache.add(P),P};return u.attributes.forEach(w=>{if(o.attrs[w]){const P=o.attrs[w];let k;const S=P.replace(/('|")(.*?)('|")/g,(i,l,_,C)=>(k=!0,`${l}${x(_)}${C}`));o.attrs[w]=k?S:x(P)}}),o}),y.length>0&&(await Promise.all(y),y.length=0),s.mode!=="development"&&m&&m.assetsCache.size){const o={tag:"div",attrs:{__posthtml_view_assets_div__:!0,style:"display:none;"},content:[]};m.assetsCache.forEach(a=>{ze(a)?o.content.push({tag:"link",attrs:{rel:"preload",as:"font",href:a,"data-raw-url":a}}):o.content.push({tag:"img",attrs:{src:a,"data-raw-url":a}})}),o.content.length&&Array.isArray(h)&&h.push(o),m.assetsCache.clear()}return h}}function _s(t,e){t={...t},t.to=e.to||t.to||"head";let s=t.type;return e.scoped!=null?s="scoped":e.global!=null&&(s="global"),t.type=s||"scoped",t}function vs(t,e){return t.source!=null?Promise.resolve(t.source||""):Y.default.readFile(t.src,e)}function ws(t,e,s,r){const n=r.prefix("query");return(t[n]||"")==="global"?r.components[e]:s[e]||r.components[e]}function bs(t,{from:e,prefix:s,join:r,slash:n}){const c={};return t.match(I.default(s("components")),u=>(u.content&&u.content.forEach(f=>{if(typeof f=="string")return;let{src:p,...v}=f.attrs||{};f.tag&&p&&(p=r(e,p),c[f.tag]={tag:f.tag,src:p,resolveId:n(p),locals:v})}),u.tag=!1,delete u.content,u)),t.match(I.default(s("component")),u=>{const f=u.attrs||{};let p=!1;if(f.src){const v="view-src-"+Ge(f.src),h=r(e,f.src);c[v]={tag:v,src:h,resolveId:n(h),locals:{}},u.tag=v,delete f.src}else p=!0;return p&&(u.tag=!1,delete u.content),u}),c}function tt(t){return[].concat(t||"").join("").trim()}function Vt(t){const e={...t||{}};return e.root=e.root||process.cwd(),e.mode=e.mode||"development",e.encoding=e.encoding||"utf8",e.viewPrefix=e.viewPrefix||"view:",e.from=e.from||"",e.plugins=e.plugins||[],e.parser=e.parser||{},e.locals=e.locals||{},e.$attrs=e.$attrs||"$attrs",e.stylePreprocessor=e.stylePreprocessor||(s=>({code:s})),e.js={type:"ts",...e.js},e.assets={...e.assets},e.assets.attributes=e.assets.attributes||["data-src","data-img"],e.assets.attrRegExp=e.assets.attrRegExp||kt,e.styled={type:"scoped",to:"head",prefix:"view-",...e.styled},typeof e.getOptions=="function"&&e.getOptions(e),e.join=(s,r)=>Ne(e.root,e.from,s,r),e.slash=(s,r)=>Oe(e.root,s,r),e.prefix=s=>`${e.viewPrefix}${s}`,e.rtl=e.rtl||!1,e.cssjanus=s=>e.rtl&&e.mode==="development"?rt(s,{transformEdgeInUrl:e.rtl.transformEdgeInUrl,transformDirInUrl:e.rtl.transformDirInUrl}):s,e.noflip=s=>e.rtl?Pt(s):s,async function(r){e.components=await as(e);const n=await ds(e)(r);return await Dt(e.parser,e.plugins,n)}}const Wt=/\.(css|scss|less|sass|styl|stylus|pcss|postcss)$/;function Lt(t){const e=Wt.test(t);return Wt.lastIndex=0,e}function xs(t,e){t.build=t.build||{},t.build.rollupOptions=t.build.rollupOptions||{},t.build.ssr=!1;const{input:s,pages:r}=js(t.root||process.cwd(),e);return t.build.rollupOptions.input=s,t.server=t.server||{},t.server.open===!0&&(t.server.open=r[0]&&`/${r[0].route||""}`||"/"),t}function $s(t){const e=[];return Ut(t).forEach(r=>{const n=`./${r.path}`;r.pageName==="index"&&e.push({from:/^\/$/,to:n}),e.push({from:new RegExp(`^/${r.route}/*`),to:n}),e.push({from:new RegExp(`^/${r.route}$`),to:n})}),e}function js(t,e){const s=Ut(e),r={};return s.forEach(n=>{r[n.pageName]=T.default.resolve(t,n.path)}),{input:r,pages:s}}function Ut({pagesDirectory:t,includes:e,ignore:s}){return e=e.filter(Boolean).map(r=>r[0]==="/"?r:"/"+r),Pe.default.sync(`${t}/**/*.html`.replace("//","/"),{objectMode:!0,ignore:s.map(r=>(r.includes(".")?r:`**/${r}/**`).replace("//","/"))}).filter(r=>e.some(n=>r.path.includes(n))?!0:!r.path.includes("/_")).map(({name:r,path:n})=>{const c={filename:r,path:n,route:"",pageName:""};return c.route=n.replace(`${t}/`,""),c.pageName=c.route.replace(/(\/index)?\.html/,"").replace("/","-"),c})}const Gt="0123456789abcdef",Jt={"=":"\\:",php:"\\#","\\:":"=","\\#":"php"},zt=/\\{\\%(\\:|\\#)(.*?)\\%\\}/gs,Cs=/<\?(=|php)(.*?)\?>/gs,Es=/(\\%\\})=""/g;function Qt(t){return t.replace(zt,function(e,s,r){return`<?${Jt[s]||s}${r}?>`})}function Yt(t){return t.replace(Cs,function(e,s,r){return`\\{\\%${Jt[s]||s}${Is(r,Gt)}\\%\\}`})}function Zt(t){return t.replace(Es,"$1").replace(zt,function(e,s,r){return`\\{\\%${s}${Ps(r,Gt)}\\%\\}`})}function Is(t,e){const s=F.createCipheriv("aes128",e,e);let r=s.update(t,"utf8","hex");return r+=s.final("hex"),r}function Ps(t,e){const s=F.createDecipheriv("aes128",e,e);let r=s.update(t,"hex","utf8");return r+=s.final("utf8"),r}async function ks(t,e=!0){let s=null;if(t){const r=wt.default.test("-f",t),n=t.replace(".ts",".js"),c=r||wt.default.test("-f",n);try{let u=null;const f=p=>{e&&require&&require.cache&&!!require.cache[p]&&delete require.cache[p]};r?(f(t),u=require(t)):c&&(f(n),u=require(n)),u&&(s=u.__esModule?u.default:u)}catch(u){console.error(u)}}return s||{}}const Xt=new Map;async function Ss(t,e,s,r){const n=T.default.join(s,".php-dev",r);return Xt.get(r)!==t&&(Xt.set(r,t),await Y.default.outputFile(T.default.resolve(e,n),t,"utf8")),{tplFileName:n,__views:""}}async function As(t,e){const{__views:s,...r}=e,n=r;n._TEMPLATE=t,n._REGISTER_GLOBAL_MODEL=!0,n._VIEWS_PATH=s;const c=JSON.stringify(n,ke.default()),{stdout:u}=await Se.default("php",[T.default.join(__dirname,"/loader.php")],{input:c});return u}const it={caseSensitive:!0,collapseBooleanAttributes:!0,collapseInlineTagWhitespace:!0,collapseWhitespace:!0,conservativeCollapse:!1,html5:!0,minifyCSS:!0,minifyJS:!0,minifyURLs:!0,noNewlinesBeforeTagClose:!0,removeAttributeQuotes:!0,removeComments:!0,removeEmptyAttributes:!1,removeRedundantAttributes:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,removeTagWhitespace:!1,useShortDoctype:!0};let lt;async function ot(t,e){return typeof e.minifyHtml=="function"&&(e.minifyHtml=e.minifyHtml(it)),e.minifyHtml&&(lt=lt||(e.minifyHtml===!0?it:{...it,...e.minifyHtml,removeTagWhitespace:!1}),t=await be.minify(t,lt),typeof e.minifyHtmlAfter=="function"?t=e.minifyHtmlAfter(t):t=t.replace(/>(\s+)</g,"><")),t}function ut(t){return t.split("?__posthtml_view__=")[0]}const Rs=(t,e,s,r,n)=>{function c(p){const v=T.default.resolve(t.root,e.pagesDirectory);return T.default.relative(v,p)}const u=t.command==="serve",f='<div style="text-align:center;"><h1>posthtml-view</h1><p>No content</p></div>';return async(p,v)=>{const h=c(v.filename);e.php&&(p=Yt(p));const y=L.default([Vt({...e,from:v.filename,htmlProcessor(g){return Yt(g)},styled:{...e.styled,extract:g=>{const d=ut(g.mainjs),m=`${s}/${g.resolveId.replace(".html",".css")}`,j=`import '${m}';`;n.set(m,g.source||"");const o=r.get(d)||"";o.includes(m)||r.set(d,o+j)}},js:{...e.js,extract:g=>{const d=ut(g.mainjs);if(g.src){const m=r.get(d)||"",j=`import '${g.src}';`;m.includes(g.src)||r.set(d,m+j)}else{const m=`${s}/${g.resolveId.replace(".html","")}`,j=`import '${m}';`;n.set(m,g.source||"");const o=r.get(d)||"";o.includes(m)||r.set(d,o+j)}}}}),...e.plugins||[]]);if(typeof e.usePlugins=="function"&&e.usePlugins(y),p=(await y.process(p,{directives:[{name:"!DOCTYPE",start:"<",end:">"},{name:"?php",start:"<",end:">"},{name:"?=",start:"<",end:">"}],...e.parser,sync:!1})).html.trim(),u)if(e.php){if(p=Zt(p),e.devMinifyHtml&&(p=await ot(p,e)),p=Qt(p),typeof e.php.devRender=="function")p=await e.php.devRender({html:p,options:e});else{const g=T.default.join(t.root,e.mocksDirectory,h.replace(".html",".ts")),[d,{tplFileName:m,__views:j}]=await Promise.all([ks(g,!0),Ss(p,t.root,e.cacheDirectory,h)]);p=await As(m,{__views:j,...d})}return p||f}else e.devMinifyHtml&&(p=await ot(p,e));return p}};let q,ft,pt,B;const R={classesKey:"_classes",idsKey:"_ids",_classes:{},_ids:{},classes:{},ids:{}},G={},J={};function Kt(t,e){try{const s=B.getItem(t)||{};return Object.keys(s).forEach(r=>{const n=s[r];e[n]=null}),s}catch{return{}}}async function Ds(){B&&(B.setItem(R.classesKey,R.classes),B.setItem(R.idsKey,R.ids))}function Ts(t){q=q||t,q.__cache_file__&&!B&&(B=new $e.JSONStorage(q.__cache_file__),R._classes=Kt(R.classesKey,G),R._ids=Kt(R.idsKey,J)),ft=ft||st(q.generateNameFilters,q.upperCase,e=>G[e]!==null),pt=pt||st(q.generateNameFilters,q.upperCase,e=>J[e]!==null)}function te(t){const e=_t.default(t);function s(r){r.forEach(n=>{if(n.type==="atrule"&&(n.name==="media"||n.name==="supports"))s(n.nodes);else switch(n.type){case"rule":n.selector=Hs(n.selector);break}})}return s(e.nodes),e.toString()}function Hs(t){return vt.default(e=>{e.walkClasses(s=>{if(V(s.value,!1,!1))return;let r=s.value,n=!1;const c=r.replace(X,u=>(n=!0,` ${u} `));if(n){r=c.split(/\s+/).map(u=>{if(!u)return"";if(V(u,!1))return u;const f=ht(u);return W(f)||u}).filter(Boolean).join("").trim(),r=Ct(r),s.setPropertyWithoutEscape("value",r);return}s.setPropertyWithoutEscape("value",W(ht(r))||r)}),e.walkIds(s=>{V(s.value,!0)||(s.value=W(mt(s.value))||s.value)})}).processSync(t)}function ht(t){const e=R._classes[t];if(e)return G[e]=null,R.classes[t]=e,delete R._classes[t],e;const s=R.classes[t];if(s)return G[s]=null,s;const r=ft.next().value;return G[r]=null,R.classes[t]=r,r}function mt(t){const e=R._ids[t];if(e)return J[e]=null,R.ids[t]=e,delete R._ids[t],e;const s=R.ids[t];if(s)return J[s]=null,s;const r=pt.next().value;return J[r]=null,R.ids[t]=r,r}function V(t,e,s){return s!==!1&&St(t)?!0:(t=(e?"#":".")+t,q.filters.some(r=>typeof r=="string"?r===t:r.test(t)))}function W(t){return t&&q.prefix+t}function qs(t){if(V(t,!0))return;const e=mt(t);if(e)return W(e)}function ee(t){if(t=t.slice(1),V(t,!0))return;const e=R.ids[t];if(e)return"#"+W(e)}const Ms=/\\?%\\?}(.*?)\\?{\\?%/gs,Ns=/\s+(\\?{\\?%)/g;function z(t,e,s){return t&&(e||(t=t.replace(X,r=>` ${r} `)),t=t.split(/\s+/).map(r=>{if(!r)return"";if(V(r,e)||typeof s=="function"&&s(r))return r;const n=e?mt(r):ht(r);return W(n)||r}).filter(Boolean).join(" ").trim(),e||(t=t.replace(Ms,(r,n)=>n?r.replace(n,` ${n.trim()} `):r).replace(Ns,"$1")),t)}const se="[[rtl]]",re="[[ltr]]",dt={type:"syntax",syntax:`<?php if($rtl): ?>${se}<?php else: ?>${re}<?php endif; ?>`,devPreview:t=>!!(t&&(t.includes("rtl=1")||t.includes("lang=ar")))},ae={enableCache:!0,generateNameFilters:[],upperCase:!0,filters:[/^(\.|#)js-/],attributes:[],blurryAttrs:[],prefix:"",__cache_file__:""};let D;function Os(t){return typeof t.rtl=="boolean"?t.rtl?dt:!1:{...dt,...t.rtl}}const Fs=/(.*)\[\[(rtl|ltr)\]\](.*)\[\[(rtl|ltr)\]\](.*)/si;function Bs(t,e){const s=xe.createFilter(["**/*.html"]);let r;const{type:n,syntax:c}=e||dt,u=h=>rt(h,{transformDirInUrl:e&&e.transformDirInUrl||!1,transformEdgeInUrl:e&&e.transformEdgeInUrl||!1}),f=()=>c&&(c.includes(se)||c.includes(re));let p=null;if(e&&n==="syntax"&&f()){const h=c.match(Fs);h&&h.length>=6&&(p=h.slice(1).map(y=>y.trim()).filter(Boolean))}const v=async h=>(await L.default([]).use(y=>(y.match(I.default("head"),g=>{const d=[];y.match(I.default("style[__posthtml_view_css__]"),j=>{const o=[].concat(j.content||"").join("").trim();return o&&!d.includes(o)&&d.push(o),j.tag=!1,delete j.content,j});const m=d.map(j=>({tag:"style",content:j}));if(g.content){const j=Ws(g.content);j===null?g.content=[...g.content,...m]:g.content.splice(j+1,0,...m)}else g.content=m;return g}),D&&y.match(I.default("style"),g=>{if(g.attrs&&g.attrs["data-min-class-ignore"]!=null)return delete g.attrs["data-min-class-ignore"],g;const d=[].concat(g.content||"").join("").trim();return d&&(g.content=[te(d)]),g}),y)).use(y=>{const g=new Map,d=a=>(a&&g.size&&g.forEach((b,x)=>{a=ne(a,x,b)}),a);y.match(I.default("div[__posthtml_view_assets_div__]"),a=>(y.match.call(a,I.default("[data-raw-url]"),b=>(b.attrs&&b.attrs["data-raw-url"]&&g.set(b.attrs["data-raw-url"],b.attrs.href||b.attrs.src||""),b.tag=!1,b)),a.tag=!1,delete a.content,a));const m=t.assets.attributes,j=t.assets.attrRegExp;y.walk(a=>{if(typeof a=="string")return a;if(a.attrs){const b=Object.keys(a.attrs);b.forEach(w=>{!m.includes(w)&&j.test(w)&&m.push(w)}),m&&m.forEach(w=>{a.attrs[w]&&(a.attrs[w]=d(a.attrs[w]))}),a.attrs.style&&(a.attrs.style=d(a.attrs.style));const x=(a.attrs["view-build-class"]||"").split(" ").filter(Boolean);if(delete a.attrs["view-build-class"],D){const w=[...D.attributes,/^[xv]-transition/],P=[...D.blurryAttrs,/^([xv]-bind)?:class/],k=(l,_)=>l.some(C=>typeof C=="string"?C===_:C.test&&C.test(_)),S=l=>r.assetsInclude(l)?!0:x.length?!x.includes(l):!1;if(b.forEach(l=>{if(!(l==="id"||l==="class")&&typeof a.attrs[l]=="string"&&!(typeof a.attrs[l]=="string"&&!a.attrs[l].trim()))if(k(w,l))a.attrs[l]=z(a.attrs[l],!1,S);else if(k(P,l)){const _=a.attrs[l]||"";let C;const A=_.replace(/('|")(.*?)('|")/g,($,M,et,Q)=>(C=!0,`${M}${z(et,!1,S)}${Q}`));a.attrs[l]=C?A:_}else x.length&&x.forEach(_=>{if(a.attrs[l].includes(_)){const C=z(_);a.attrs[l]=ne(a.attrs[l],_,C)}})}),a.attrs.class&&(a.attrs.class=z(a.attrs.class)),a.attrs.id&&(a.attrs.id=z(a.attrs.id,!0)),a.attrs.for){const l=qs(a.attrs.for);l&&(a.attrs.for=l)}if(["mask","fill","filter"].forEach(l=>{if(a.attrs[l]){const _=ee(a.attrs[l].replace(/url\((.*?)\)/g,"$1"));_&&(a.attrs[l]=`url(${_})`)}}),a.tag==="use"&&(a.attrs.href||a.attrs["xlink:href"])){const l=a.attrs.href?"href":"xlink:href",_=ee(a.attrs[l]||"");_&&(a.attrs[l]=_)}}}return a});const o="posthtml-view-syntax-style-x";return y.match(I.default("style"),a=>{let b=d([].concat(a.content||"").join("").trim()),x=b&&at(b,"");if(x&&p&&p.length){const w=u(b);if(w!==x)return a.content=p.map(P=>P==="rtl"?{tag:o,attrs:a.attrs,content:w}:P==="ltr"?{tag:o,attrs:a.attrs,content:x}:P),a.tag=!1,a.attrs=void 0,a}return x&&(a.content=[x]),a}),p&&p.length?(y.match(I.default("link[href]"),a=>{const b=a.attrs&&a.attrs.href;if(a.attrs&&b&&b.endsWith(".css")&&p){const x=b.replace(".css",".rtl.css");a.attrs.href=p.map(w=>w==="rtl"?x:w==="ltr"?b:w).join("")}return a}),y.match(I.default("html"),a=>(p&&(a.attrs=a.attrs||{},a.attrs.dir=p.map(b=>b==="rtl"?"rtl":b==="ltr"?"ltr":b).join("")),a))):y.match(I.default("html"),a=>(a.attrs=a.attrs||{},a.attrs.dir="ltr",a)),Promise.resolve().then(()=>(y.match(I.default(o),a=>(a.tag="style",a)),y))}).use(y=>Promise.resolve().then(()=>{let g;typeof t.generateUsePlugins=="function"&&(g=t.generateUsePlugins(y));const d=["crossorigin","nomodule","defer","async","hidden","x-transition","x-ignore","x-cloak","x-collapse"];return y.walk(m=>(m.attrs&&Object.keys(m.attrs).forEach(o=>{m.attrs[o]===""&&d.some(a=>a.indexOf(o)===0)&&(m.attrs[o]=!0)}),m)),g||y})).process(h,{})).html;return{name:"view:posthtml-view-bundle",enforce:"post",apply:"build",configResolved(h){r=h},async generateBundle(h,y){const g=t.minifyClassnames;g&&!D&&(D=g===!0?ae:{...ae,...g},D.prefix=D.prefix&&Z(D.prefix),D.filters=[...D.filters,"#vite-legacy-polyfill","#vite-legacy-entry"],D.enableCache?D.__cache_file__=T.default.join(r.root,T.default.join(t.cacheDirectory,"css")):D.__cache_file__="",Ts(D));for(const d of Object.values(y)){if(d.type==="asset"&&d.fileName.endsWith(".css")){let m=gt(d.source);D&&(m=te(m)),d.source=at(m,""),e&&this.emitFile({type:"asset",fileName:d.fileName.replace(".css",".rtl.css"),name:d.name?d.name.replace(".css",".rtl.css"):void 0,source:u(m)})}if(d.type==="asset"&&s(d.fileName)){let m=gt(d.source);m=await v(m),t.php&&(m=Zt(m)),m=await ot(m,t),t.php&&(m=Qt(m)),d.source=m;const{fileName:j,name:o}=Vs(d.fileName,d.name,t);if(d.fileName=j,d.name=o,e&&n==="new-html"){const a=(await L.default([]).use(b=>(b.match(I.default("html"),x=>(x.attrs=x.attrs||{},x.attrs.dir="rtl",x)),b.match(I.default("link[href]"),x=>(x.attrs&&x.attrs.href&&x.attrs.href.endsWith(".css")&&(x.attrs.href=x.attrs.href.replace(".css",".rtl.css")),x)),b.match(I.default("style"),x=>{const w=[].concat(x.content||"").join("").trim();return w&&(x.content=[u(w)]),x}),b)).process(m,{})).html;a&&this.emitFile({type:"asset",fileName:j.replace(/\.(html?|php)/g,".rtl.$1"),name:o?o.replace(/\.(html?|php)/g,".rtl.$1"):void 0,source:a})}}if(d.type==="chunk"&&d.fileName.includes("-legacy")&&typeof t.removeCssInJs=="function"){const m=t.removeCssInJs(gt(d.code));d.code=m||d.code}}await Ds()}}}function Vs(t,e,s){const{buildPagesDirectory:r,pagesDirectory:n,php:c}=s;if(r!==n){const u=t.indexOf(n);u>=0&&(t=r+t.slice(u+n.length))}return c&&c.rename&&(t=t.replace(/\.(html?)/g,".php"),e&&(e=e.replace(/\.(html?)/g,".php"))),{fileName:t,name:e}}function gt(t){return t instanceof Uint8Array?Buffer.from(t).toString("utf-8"):t}function Ws(t){const e=t.length;let s=null;for(let r=e-1;r>=0;r--){const n=t[r];if(typeof n=="string")continue;const c=n.attrs||{};if(n.tag==="link"&&c.rel==="stylesheet"||n.tag==="link"&&c.rel==="modulepreload"||n.tag==="script"&&c.type==="module"&&c.src){s=r;break}}return s}function ne(t,e,s){for(;t.includes(e);)t=t.replace(e,s);return t}function Ls(t){const e=yt.merge({includes:[],ignore:[],pagesDirectory:"pages",mocksDirectory:"mocks",buildPagesDirectory:"pages",cacheDirectory:".posthtml-view-cache",usePlugins:null,rtl:!1,minifyHtml:!0,devMinifyHtml:!1,minifyClassnames:!1},t||{});e.pagesDirectory=e.pagesDirectory||"pages",e.buildPagesDirectory=e.buildPagesDirectory||e.pagesDirectory,e.cacheDirectory=e.cacheDirectory||".posthtml-view-cache",e.getOptions=p=>{e.styled=p.styled,e.assets=p.assets};const s=new Map,r=new Map,n="virtual:posthtml-view",c=Os(e),u=()=>{const p="view:posthtml-view-pages";let v;return{name:p,enforce:"pre",config(h,{mode:y}){xs(h,e)},configResolved(h){v=h,e.root=v.root,e.assets=e.assets||{},e.assets._include=v.assetsInclude,e.mode=v.command==="build"?"production":"development"},transformIndexHtml:{enforce:"pre",async transform(h,y){return v.command==="serve"?c&&typeof c.devPreview=="function"&&c.devPreview(y.originalUrl)?e.rtl=c:e.rtl=!1:e.rtl=c,await Rs(v,e,n,s,r)(h,y)}},async resolveId(h,y){return h===n||/\?__posthtml_view__=(0|1)/g.test(h)||h.startsWith(n)?h:null},async load(h){if(h===n)return"";if(/\?__posthtml_view__=(0|1)/g.test(h)){const y=ut(h),g=h.includes("__posthtml_view__=1");let d="";return g||(d=d+`import '${y.replace(/\.(t|j)s/g,"")}';`),d=d+(s.get(y)||""),d}return h.startsWith(n)?r.get(h)||"":null},async transform(h,y){return v.command==="build"&&c&&Lt(y)?Pt(h):null}}};return[(()=>({name:"view:posthtml-view-dev",enforce:"pre",apply:"serve",configureServer(p){p.middlewares.use(Ie.default({verbose:Boolean({}.DEBUG)&&{}.DEBUG!=="false",disableDotRule:void 0,htmlAcceptHeaders:["text/html","application/xhtml+xml"],rewrites:$s(e)}))},async transform(p,v){return c&&e.rtl&&Lt(v)?rt(p,{transformDirInUrl:c.transformDirInUrl||!1,transformEdgeInUrl:c.transformEdgeInUrl||!1}):null},async handleHotUpdate({file:p,server:v}){return(p.includes("/"+e.mocksDirectory)||p.includes(".html"))&&v.ws.send({type:"full-reload",path:"*"}),[]}}))(),u(),Bs(e,c)]}E.compilerViewPlugin=Vt,E.generateName=st,E.slugify=xt,E.toValidCSSIdentifier=Z,E.vitePluginPosthtmlView=Ls,Object.defineProperty(E,"__esModule",{value:!0}),E[Symbol.toStringTag]="Module"});
